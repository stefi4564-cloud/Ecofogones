<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ecofogones - Cocina Eficiente y Sostenible</title>

    <meta name="description" content="Fabricamos fogones eficientes que ahorran hasta 50% de le√±a. Soluciones sostenibles para tu cocina.">
    <link rel="icon" href="icono.png" type="image/png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- ENLAZA TU ARCHIVO CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header id="header">
        <a href="#" class="logo">ECOFOGONES</a>
        <nav class="navbar">
            <a href="#hero">Inicio</a>
            <a href="#productos">Productos</a>
            <a href="#about">Nosotros</a>
            <a href="#faq">FAQ</a>
            <a href="#contacto">Contacto</a>
        </nav>
        <div class="header-actions">
            <button id="btn-carrito">
                <i class="fas fa-shopping-cart"></i>
                <span id="contador-carrito">0</span>
            </button>
            <button class="menu-toggler">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <main>
        <section id="hero" class="hero container fade-in">
            <div class="hero-content">
                <h1 class="hero-title">Cocina con Energ√≠a Limpia</h1>
                <p class="hero-subtitle">Fogones ecol√≥gicos que ahorran hasta un 50% de le√±a. ¬°Una soluci√≥n sostenible para tu hogar!</p>
                <div class="hero-buttons">
                    <a href="#productos" class="btn btn-primary">Ver Productos</a>
                    <a href="#contacto" class="btn btn-secondary">M√°s Informaci√≥n</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://images.pexels.com/photos/4825742/pexels-photo-4825742.jpeg" alt="Imagen de un fog√≥n ecol√≥gico">
            </div>
        </section>

        <section id="stats" class="stats fade-in">
            <div class="container stats-grid">
                <div class="stat-item">
                    <i class="fas fa-seedling"></i>
                    <div class="stat-number">+1000</div>
                    <div class="stat-text">Familias beneficiadas</div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-fire-extinguisher"></i>
                    <div class="stat-number">-50%</div>
                    <div class="stat-text">Ahorro en le√±a</div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-tree"></i>
                    <div class="stat-number">+15K</div>
                    <div class="stat-text">√Årboles salvados</div>
                </div>
            </div>
        </section>

        <section id="productos" class="productos">
            <div class="container">
                <div class="section-header fade-in">
                    <h2 class="section-title">Nuestros Productos</h2>
                    <p class="section-subtitle">Descubre nuestra l√≠nea completa de fogones ecol√≥gicos.</p>
                </div>
                <div class="productos-grid">
                    <!-- Producto 1: Fog√≥n Tradicional -->
                    <div class="producto fade-in">
                        <div class="producto-imagen">
                            <img src="https://ecofogones.netlify.app/assets/fogontradicional1.png" alt="Fog√≥n Tradicional" loading="lazy" />
                            <div class="producto-badge">M√°s Popular</div>
                        </div>
                        <div class="producto-info">
                            <h3>Fog√≥n Tradicional</h3>
                            <p class="producto-descripcion">Perfecto para el hogar, eficiente y econ√≥mico. Ideal para familias de 3-5 personas. Construcci√≥n robusta en acero inoxidable.</p>
                            <div class="producto-caracteristicas">
                                <span class="caracteristica">Acero Inoxidable</span>
                                <span class="caracteristica">Familiar</span>
                                <span class="caracteristica">Garant√≠a 2 a√±os</span>
                            </div>
                            <div class="producto-precio-container">
                                <div>
                                    <div class="producto-precio">$450.000</div>
                                    <div class="precio-original">$500.000</div>
                                </div>
                            </div>
                            <button class="agregar-carrito" data-id="eco-100">
                                <i class="fas fa-cart-plus"></i> Agregar al Carrito
                            </button>
                        </div>
                    </div>

                    <!-- Producto 2: Fog√≥n de 2 boquillas -->
                    <div class="producto fade-in">
                        <div class="producto-imagen">
                            <img src="https://ecofogones.netlify.app/assets/fogonde2boquillas.png" alt="Fog√≥n de 2 boquillas" loading="lazy" />
                            <div class="producto-badge">Recomendado</div>
                        </div>
                        <div class="producto-info">
                            <h3>Fog√≥n de 2 boquillas</h3>
                            <p class="producto-descripcion">Mayor capacidad para familias grandes de 6-10 personas. Dise√±o robusto y duradero con tecnolog√≠a de combusti√≥n mejorada.</p>
                            <div class="producto-caracteristicas">
                                <span class="caracteristica">Gran Capacidad</span>
                                <span class="caracteristica">Eco-friendly</span>
                                <span class="caracteristica">Garant√≠a 3 a√±os</span>
                            </div>
                            <div class="producto-precio-container">
                                <div>
                                    <div class="producto-precio">$650.000</div>
                                    <div class="precio-original">$750.000</div>
                                </div>
                            </div>
                            <button class="agregar-carrito" data-id="eco-200">
                                <i class="fas fa-cart-plus"></i> Agregar al Carrito
                            </button>
                        </div>
                    </div>

                    <!-- Producto 3: Fog√≥n de 3 boquillas -->
                    <div class="producto fade-in">
                        <div class="producto-imagen">
                            <img src="https://ecofogones.netlify.app/assets/fogonde3boquillas.png" alt="Fog√≥n de 3 boquillas" loading="lazy" />
                            <div class="producto-badge">Premium</div>
                        </div>
                        <div class="producto-info">
                            <h3>Fog√≥n de 3 boquillas</h3>
                            <p class="producto-descripcion">Para restaurantes y cocinas comerciales. M√°xima eficiencia y durabilidad. Construcci√≥n industrial con materiales de primera calidad.</p>
                            <div class="producto-caracteristicas">
                                <span class="caracteristica">Uso Comercial</span>
                                <span class="caracteristica">Alta Durabilidad</span>
                                <span class="caracteristica">Garant√≠a 5 a√±os</span>
                            </div>
                            <div class="producto-precio-container">
                                <div>
                                    <div class="producto-precio">$1.200.000</div>
                                    <div class="precio-original">$1.400.000</div>
                                </div>
                            </div>
                            <button class="agregar-carrito" data-id="eco-300">
                                <i class="fas fa-cart-plus"></i> Agregar al Carrito
                            </button>
                        </div>
                    </div>

                    <!-- Producto 4: Plato para arado -->
                    <div class="producto fade-in">
                        <div class="producto-imagen">
                            <img src="https://ecofogones.netlify.app/assets/platoaradofogon.png" alt="Plato para arado" loading="lazy" />
                            <div class="producto-badge">Nuevo</div>
                        </div>
                        <div class="producto-info">
                            <h3>Plato para arado</h3>
                            <p class="producto-descripcion">Accesorio ideal para usar con nuestros fogones, perfecto para preparar comidas en plancha. Compatible con todos los modelos.</p>
                            <div class="producto-caracteristicas">
                                <span class="caracteristica">Acero al Carbono</span>
                                <span class="caracteristica">Vers√°til</span>
                                <span class="caracteristica">F√°cil de Limpiar</span>
                            </div>
                            <div class="producto-precio-container">
                                <div>
                                    <div class="producto-precio">$120.000</div>
                                    <div class="precio-original">$140.000</div>
                                </div>
                            </div>
                            <button class="agregar-carrito" data-id="eco-400">
                                <i class="fas fa-cart-plus"></i> Agregar al Carrito
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="about">
            <div class="container">
                <div class="about-content-container">
                    <div class="about-image fade-in">
                        <img src="https://images.pexels.com/photos/12290352/pexels-photo-12290352.jpeg" alt="Acerca de nuestra misi√≥n">
                    </div>
                    <div class="about-content fade-in">
                        <h2 class="section-title">Nuestra Historia y Compromiso</h2>
                        <p>En Ecofogones, creemos en el poder de la innovaci√≥n para crear un impacto positivo en el medio ambiente y en la calidad de vida de las comunidades. Nuestros fogones no solo son una soluci√≥n eficiente para cocinar, sino tambi√©n un paso hacia un futuro m√°s sostenible.</p>
                        <div class="mission-vision-container">
                            <div class="mission-vision-item">
                                <h3>Nuestra Misi√≥n</h3>
                                <p>Proveer a las familias con soluciones de cocci√≥n sostenibles, seguras y eficientes, mejorando su bienestar y reduciendo el impacto ambiental.</p>
                            </div>
                            <div class="mission-vision-item">
                                <h3>Nuestra Visi√≥n</h3>
                                <p>Ser l√≠deres en el mercado de fogones ecol√≥gicos, promoviendo un estilo de vida m√°s verde y consciente en todas las comunidades de Colombia.</p>
                            </div>
                        </div>
                        <a href="#contacto" class="btn btn-primary" style="margin-top: 2rem;">Conoce m√°s</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="faq" class="faq">
            <div class="container">
                <div class="section-header fade-in">
                    <h2 class="section-title">Preguntas Frecuentes</h2>
                    <p class="section-subtitle">Aclara tus dudas sobre nuestros productos y servicios.</p>
                </div>
                <div class="faq-container fade-in">
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            <h3>¬øCu√°nto combustible (le√±a) ahorra un ecofog√≥n?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Nuestros fogones est√°n dise√±ados para ser hasta un 50% m√°s eficientes que los fogones tradicionales, lo que te permite ahorrar una cantidad significativa de le√±a a largo plazo. Adem√°s, contribuyes a la reducci√≥n de la tala de √°rboles.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            <h3>¬øC√≥mo se realiza el env√≠o de los productos?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Hacemos env√≠os a nivel nacional a trav√©s de transportadoras aliadas. El tiempo de entrega puede variar seg√∫n tu ubicaci√≥n. Para m√°s detalles sobre el costo y el tiempo de env√≠o, por favor cont√°ctanos directamente por WhatsApp.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            <h3>¬øQu√© tipo de mantenimiento requieren los fogones?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Nuestros ecofogones est√°n construidos con materiales de alta calidad y son muy duraderos. El mantenimiento es m√≠nimo, simplemente recomendamos limpiarlos regularmente y evitar el uso de productos abrasivos para prolongar su vida √∫til.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            <h3>¬øPuedo usar otros combustibles adem√°s de la le√±a?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Nuestros fogones est√°n optimizados para el uso de le√±a, pero tambi√©n pueden funcionar con otros materiales combustibles como briquetas de biomasa. Para cualquier duda, te recomendamos contactarnos.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="reviews" class="reviews">
            <div class="container">
                <div class="section-header fade-in">
                    <h2 class="section-title">Lo que dicen nuestros clientes</h2>
                    <p class="section-subtitle">Testimonios de quienes ya disfrutan de un fog√≥n ecoficiente.</p>
                </div>
                <div class="reviews-grid">
                    <div class="review-card fade-in">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Foto de cliente" class="review-photo">
                        <p class="review-text">"El mejor fog√≥n que he tenido. Ahorro una cantidad incre√≠ble de le√±a y la comida queda deliciosa. ¬°Lo recomiendo al 100%!"</p>
                        <div class="review-author">- Carlos R.</div>
                    </div>
                    <div class="review-card fade-in">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Foto de cliente" class="review-photo">
                        <p class="review-text">"Funciona de maravilla. Es robusto, f√°cil de usar y se nota la calidad de los materiales. La atenci√≥n al cliente fue excelente."</p>
                        <div class="review-author">- Marcela G.</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contacto" class="contacto">
            <div class="container">
                <div class="section-header fade-in">
                    <h2 class="section-title">Cont√°ctanos</h2>
                    <p class="section-subtitle">Estamos listos para ayudarte. Env√≠anos un mensaje o cont√°ctanos directamente.</p>
                </div>
                <div class="contacto-container fade-in">
                    <div class="contacto-info">
                        <h3>Informaci√≥n de Contacto</h3>
                        <p><i class="fas fa-envelope"></i> contacto@ecofogones.com</p>
                        <p><i class="fab fa-whatsapp"></i> +57 314 867 3011</p>
                        <p class="envios-info"><i class="fas fa-shipping-fast"></i> Hacemos env√≠os a nivel nacional</p>
                        <p>Horario de atenci√≥n: Lunes a Viernes, 8:00 AM - 5:00 PM</p>
                    </div>
                    <div class="contacto-form-container">
                        <form id="contact-form" class="contacto-form">
                            <div class="form-group">
                                <label for="nombre">Nombre</label>
                                <input type="text" id="nombre" name="nombre" placeholder="Tu nombre" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Correo Electr√≥nico</label>
                                <input type="email" id="email" name="email" placeholder="Tu correo" required>
                            </div>
                            <div class="form-group">
                                <label for="asunto">Asunto</label>
                                <input type="text" id="asunto" name="asunto" placeholder="Asunto del mensaje" required>
                            </div>
                            <div class="form-group">
                                <label for="mensaje">Mensaje</label>
                                <textarea id="mensaje" name="mensaje" rows="5" placeholder="Tu mensaje" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Enviar Mensaje</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- CARRITO DE COMPRAS MODAL -->
    <div id="carrito-overlay" class="carrito-overlay"></div>
    <div id="carrito" class="carrito">
        <div class="carrito-header">
            <h3><i class="fas fa-shopping-cart"></i> Carrito de Compras</h3>
            <button id="cerrar-carrito" class="cerrar-carrito">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="lista-carrito">
            </div>
        <p id="carrito-vacio">El carrito est√° vac√≠o.</p>
        <div class="resumen-pedido">
            <div class="resumen-linea">
                <span>Subtotal:</span>
                <span id="subtotal-carrito">$0</span>
            </div>
            <div class="resumen-linea descuento-linea">
                <span>Descuento (<span id="descuento-porcentaje">0%</span>):</span>
                <span>-<span id="descuento-valor">$0</span></span>
            </div>
            <div class="cupon-container">
                <label for="cupon-input" class="label-cupon">¬øTienes un cup√≥n?</label>
                <div class="cupon-input-container">
                    <input type="text" id="cupon-input" placeholder="Ingresa tu cup√≥n (ECOFOGON10 o AHORRO50000)" />
                    <button id="aplicar-cupon-btn" class="btn-cupon">Aplicar</button>
                </div>
            </div>
            <div class="resumen-linea total-linea">
                <span>Total:</span>
                <span id="total-carrito">$0</span>
            </div>
        </div>
        <div class="carrito-acciones">
            <button id="vaciar-carrito" class="btn-vaciar">Vaciar Carrito</button>
            <button id="finalizar-pedido" class="btn-finalizar-compra">Finalizar Pedido</button>
        </div>
    </div>

    <a href="https://wa.me/573148673011?text=Hola,%20me%20interesa%20conocer%20m√°s%20sobre%20los%20ecofogones" class="whatsapp-flotante" target="_blank" rel="noopener noreferrer">
        <i class="fab fa-whatsapp"></i>
    </a>

    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h3>Ecofogones</h3>
                <p>Soluciones sostenibles para tu cocina.</p>
            </div>
            <div class="footer-section">
                <h3>Links</h3>
                <ul>
                    <li><a href="#hero">Inicio</a></li>
                    <li><a href="#productos">Productos</a></li>
                    <li><a href="#about">Nosotros</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contacto</h3>
                <p><i class="fas fa-envelope"></i> contacto@ecofogones.com</p>
                <p><i class="fab fa-whatsapp"></i> +57 314 867 3011</p>
            </div>
        </div>
        <div class="container footer-bottom">
            &copy; 2025 Ecofogones. Todos los derechos reservados.
        </div>
    </footer>

    <script>
        // ============================================
        // PRODUCTOS Y CARRITO DE COMPRAS COMPLETO
        // ============================================
        
        // Base de datos de productos
        const products = [
            {
                id: "eco-100",
                name: "Fog√≥n Tradicional",
                price: 450000,
                img: "https://ecofogones.netlify.app/assets/fogontradicional1.png",
                description: "Perfecto para el hogar, eficiente y econ√≥mico. Ideal para familias de 3-5 personas. Construcci√≥n robusta en acero inoxidable.",
                badge: "M√°s Popular",
                features: ["Acero Inoxidable", "Familiar", "Garant√≠a 2 a√±os"],
                originalPrice: 500000
            },
            {
                id: "eco-200",
                name: "Fog√≥n de 2 boquillas",
                price: 650000,
                img: "https://ecofogones.netlify.app/assets/fogonde2boquillas.png",
                description: "Mayor capacidad para familias grandes de 6-10 personas. Dise√±o robusto y duradero con tecnolog√≠a de combusti√≥n mejorada.",
                badge: "Recomendado",
                features: ["Gran Capacidad", "Eco-friendly", "Garant√≠a 3 a√±os"],
                originalPrice: 750000
            },
            {
                id: "eco-300",
                name: "Fog√≥n de 3 boquillas",
                price: 1200000,
                img: "https://ecofogones.netlify.app/assets/fogonde3boquillas.png",
                description: "Para restaurantes y cocinas comerciales. M√°xima eficiencia y durabilidad. Construcci√≥n industrial con materiales de primera calidad.",
                badge: "Premium",
                features: ["Uso Comercial", "Alta Durabilidad", "Garant√≠a 5 a√±os"],
                originalPrice: 1400000
            },
            {
                id: "eco-400",
                name: "Plato para arado",
                price: 120000,
                img: "https://ecofogones.netlify.app/assets/platoaradofogon.png",
                description: "Accesorio ideal para usar con nuestros fogones, perfecto para preparar comidas en plancha. Compatible con todos los modelos.",
                badge: "Nuevo",
                features: ["Acero al Carbono", "Vers√°til", "F√°cil de Limpiar"],
                originalPrice: 140000
            }
        ];

        // C√≥digos de descuento disponibles
        const discountCodes = {
            'ECOFOGON10': { type: 'percentage', value: 0.10, description: '10% de descuento en tu compra.' },
            'AHORRO50000': { type: 'fixed', value: 50000, description: '$50.000 de descuento en tu compra.' }
        };

        let appliedDiscount = 0;
        let isDiscountApplied = false;

        // Funci√≥n para formato de moneda (COP)
        const formatCurrency = (n) => n.toLocaleString('es-CO', { style: 'currency', currency: 'COP', maximumFractionDigits: 0 });

        // Variables del carrito
        let cart = JSON.parse(localStorage.getItem('ecofogones_cart') || '[]');
        let appliedDiscountCode = localStorage.getItem('ecofogones_discount_code') || '';
        let appliedDiscountValue = parseFloat(localStorage.getItem('ecofogones_discount_value')) || 0;
        let isDiscountAppliedFlag = localStorage.getItem('ecofogones_is_discount_applied') === 'true';

        // Elementos DOM
        const btnCarrito = document.getElementById('btn-carrito');
        const carritoElement = document.getElementById('carrito');
        const cerrarCarrito = document.getElementById('cerrar-carrito');
        const carritoOverlay = document.getElementById('carrito-overlay');
        const listaCarrito = document.getElementById('lista-carrito');
        const totalCarritoEl = document.getElementById('total-carrito');
        const subtotalCarritoEl = document.getElementById('subtotal-carrito');
        const descuentoValorEl = document.getElementById('descuento-valor');
        const descuentoPorcentajeEl = document.getElementById('descuento-porcentaje');
        const contadorCarrito = document.getElementById('contador-carrito');
        const carritoVacio = document.getElementById('carrito-vacio');
        const vaciarCarritoBtn = document.getElementById('vaciar-carrito');
        const finalizarPedidoBtn = document.getElementById('finalizar-pedido');
        const cuponInput = document.getElementById('cupon-input');
        const aplicarCuponBtn = document.getElementById('aplicar-cupon-btn');
        const contactForm = document.getElementById('contact-form');

        if (isDiscountAppliedFlag && appliedDiscountCode) {
            appliedDiscount = appliedDiscountValue;
            isDiscountApplied = true;
            if (cuponInput) cuponInput.value = appliedDiscountCode;
        }

        // ============================================
        // FUNCIONES DEL CARRITO
        // ============================================

        function saveCart() {
            localStorage.setItem('ecofogones_cart', JSON.stringify(cart));
            localStorage.setItem('ecofogones_discount_code', isDiscountApplied ? cuponInput.value : '');
            localStorage.setItem('ecofogones_discount_value', appliedDiscount);
            localStorage.setItem('ecofogones_is_discount_applied', isDiscountApplied);
            updateCartDisplay();
        }

        function updateCartDisplay() {
            if (!listaCarrito) return;
            listaCarrito.innerHTML = '';
            let subtotal = 0;
            let totalItems = 0;

            if (cart.length === 0) {
                if (carritoVacio) carritoVacio.style.display = 'block';
                if (vaciarCarritoBtn) vaciarCarritoBtn.style.display = 'none';
                if (finalizarPedidoBtn) finalizarPedidoBtn.style.display = 'none';
            } else {
                if (carritoVacio) carritoVacio.style.display = 'none';
                if (vaciarCarritoBtn) vaciarCarritoBtn.style.display = 'block';
                if (finalizarPedidoBtn) finalizarPedidoBtn.style.display = 'block';

                cart.forEach((item) => {
                    const product = products.find(p => p.id === item.id);
                    if (!product) return;

                    const subtotalItem = product.price * item.qty;
                    subtotal += subtotalItem;
                    totalItems += item.qty;

                    const itemEl = document.createElement('div');
                    itemEl.className = 'carrito-item';
                    itemEl.innerHTML = `
                        <img src="${product.img}" alt="${product.name}">
                        <div class="carrito-item-info">
                            <div class="carrito-item-nombre">${product.name}</div>
                            <div class="carrito-item-precio">${formatCurrency(product.price)}</div>
                            <div class="carrito-item-cantidad">
                                <button class="cantidad-btn" onclick="changeQuantity('${item.id}', -1)">-</button>
                                <span class="cantidad-numero">${item.qty}</span>
                                <button class="cantidad-btn" onclick="changeQuantity('${item.id}', 1)">+</button>
                            </div>
                        </div>
                        <button class="eliminar-item" onclick="removeItem('${item.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    listaCarrito.appendChild(itemEl);
                });
            }

            const finalTotal = subtotal - appliedDiscount;
            if (subtotalCarritoEl) subtotalCarritoEl.textContent = formatCurrency(subtotal);
            if (descuentoValorEl) descuentoValorEl.textContent = formatCurrency(appliedDiscount);
            if (descuentoPorcentajeEl) descuentoPorcentajeEl.textContent = subtotal > 0 ? `${(appliedDiscount / subtotal * 100).toFixed(0)}%` : '0%';
            if (totalCarritoEl) totalCarritoEl.textContent = formatCurrency(finalTotal < 0 ? 0 : finalTotal);
            if (contadorCarrito) {
                contadorCarrito.textContent = totalItems;
                contadorCarrito.style.display = totalItems > 0 ? 'flex' : 'none';
            }
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.qty += 1;
            } else {
                cart.push({ id: product.id, qty: 1 });
            }
            saveCart();

            const cartButton = document.getElementById('btn-carrito');
            if (cartButton) {
                cartButton.classList.add('producto-agregado');
                setTimeout(() => cartButton.classList.remove('producto-agregado'), 600);
            }
        }

        function changeQuantity(id, change) {
            const item = cart.find(i => i.id === id);
            if (!item) return;

            item.qty += change;
            if (item.qty <= 0) {
                cart = cart.filter(i => i.id !== id);
            }
            saveCart();
        }

        function removeItem(id) {
            cart = cart.filter(i => i.id !== id);
            saveCart();
        }

        function openCart() {
            if (carritoElement) carritoElement.classList.add('carrito-visible');
            if (carritoOverlay) carritoOverlay.classList.add('active');
            document.body.classList.add('no-scroll');
        }

        function closeCart() {
            if (carritoElement) carritoElement.classList.remove('carrito-visible');
            if (carritoOverlay) carritoOverlay.classList.remove('active');
            document.body.classList.remove('no-scroll');
        }

        function emptyCart() {
            if (cart.length === 0) return;
            if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {
                cart = [];
                appliedDiscount = 0;
                isDiscountApplied = false;
                if (cuponInput) cuponInput.value = '';
                saveCart();
            }
        }

        function applyDiscount(code) {
            if (isDiscountApplied) {
                alert('Ya se ha aplicado un cup√≥n de descuento.');
                return;
            }

            const coupon = discountCodes[code.toUpperCase()];
            if (!coupon) {
                alert('El cup√≥n ingresado no es v√°lido. Prueba: ECOFOGON10 o AHORRO50000');
                return;
            }

            const subtotal = cart.reduce((total, item) => {
                const product = products.find(p => p.id === item.id);
                return total + (product ? product.price * item.qty : 0);
            }, 0);

            if (coupon.type === 'percentage') {
                appliedDiscount = subtotal * coupon.value;
            } else if (coupon.type === 'fixed') {
                appliedDiscount = coupon.value;
            }

            isDiscountApplied = true;
            saveCart();
            alert(`¬°Cup√≥n "${code.toUpperCase()}" aplicado! Descuento de ${formatCurrency(appliedDiscount)}`);
        }

        function checkout() {
            if (cart.length === 0) {
                alert('Tu carrito est√° vac√≠o. Agrega productos para continuar.');
                return;
            }

            let message = '¬°Hola! Me interesa hacer el siguiente pedido de Ecofogones:\n\n';
            let subtotal = 0;

            cart.forEach(item => {
                const product = products.find(p => p.id === item.id);
                if (product) {
                    const subtotalItem = product.price * item.qty;
                    subtotal += subtotalItem;
                    message += `‚Ä¢ *${product.name}*\n`;
                    message += `  - Cantidad: ${item.qty}\n`;
                    message += `  - Subtotal: ${formatCurrency(subtotalItem)}\n\n`;
                }
            });

            const finalTotal = subtotal - appliedDiscount;
            message += `üõí *Resumen del Pedido*\n`;
            message += `---------------------------\n`;
            message += `Subtotal: ${formatCurrency(subtotal)}\n`;
            if (isDiscountApplied) {
                message += `Descuento: -${formatCurrency(appliedDiscount)}\n`;
            }
            message += `*TOTAL: ${formatCurrency(finalTotal < 0 ? 0 : finalTotal)}*\n\n`;
            message += '¬øPodr√≠an confirmarme la disponibilidad y los tiempos de entrega? ¬°Gracias!';

            const urlWhatsApp = `https://wa.me/573148673011?text=${encodeURIComponent(message)}`;
            window.open(urlWhatsApp, '_blank');
        }

        // ============================================
        // OTRAS FUNCIONES
        // ============================================

        function toggleFaq(element) {
            const faqItem = element.parentElement;
            const answer = faqItem.querySelector('.faq-answer');
            const isActive = faqItem.classList.contains('active');
            
            // Cerrar todas las respuestas
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Si no estaba activa, activarla
            if (!isActive) {
                faqItem.classList.add('active');
            }
        }

        function sendContactForm(event) {
            event.preventDefault();

            const name = document.getElementById('nombre').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('asunto').value;
            const message = document.getElementById('mensaje').value;

            const whatsappMessage = `¬°Hola! He llenado un formulario de contacto en tu sitio web. Aqu√≠ est√° la informaci√≥n:\n\n` +
                                        `*Nombre:* ${name}\n` +
                                        `*Correo:* ${email}\n` +
                                        `*Asunto:* ${subject}\n` +
                                        `*Mensaje:* ${message}\n\n`;

            const urlWhatsApp = `https://wa.me/573148673011?text=${encodeURIComponent(whatsappMessage)}`;
            window.open(urlWhatsApp, '_blank');

            contactForm.reset();
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        // Eventos del carrito
        if (btnCarrito) btnCarrito.addEventListener('click', openCart);
        if (cerrarCarrito) cerrarCarrito.addEventListener('click', closeCart);
        if (carritoOverlay) carritoOverlay.addEventListener('click', closeCart);
        if (vaciarCarritoBtn) vaciarCarritoBtn.addEventListener('click', emptyCart);
        if (finalizarPedidoBtn) finalizarPedidoBtn.addEventListener('click', checkout);
        if (aplicarCuponBtn) aplicarCuponBtn.addEventListener('click', () => {
            applyDiscount(cuponInput.value);
        });

        // Evento para el formulario de contacto
        if (contactForm) {
            contactForm.addEventListener('submit', sendContactForm);
        }

        // Evento para a√±adir productos al carrito
        document.addEventListener('click', (event) => {
            const botonAgregar = event.target.closest('.agregar-carrito');
            if (botonAgregar) {
                const id = botonAgregar.dataset.id;
                addToCart(id);
            }
        });

        // Navegaci√≥n suave
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar carrito
            updateCartDisplay();

            // Navegaci√≥n suave
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
    </html>
